(this.webpackJsonpfrontendapp=this.webpackJsonpfrontendapp||[]).push([[0],{38:function(e,t,n){},57:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(32),a=n.n(s),o=(n(38),n(9)),i=n(10),l=n(12),u=n(11),j=n(8),d=n.n(j),h=n(13),b=n(2),p=n(22),O=(n(57),n(0)),x=function(e){var t=e.user,n=e.deleteUser;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.username}),Object(O.jsx)("td",{children:t.first_name}),Object(O.jsx)("td",{children:t.last_name}),Object(O.jsx)("td",{children:t.email}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"DELETE"})})]})},f=function(e){var t=e.users,n=e.deleteUser;return Object(O.jsx)("div",{className:"outer",children:Object(O.jsx)("div",{className:"inner",children:Object(O.jsxs)("table",{className:"Table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"User name"}),Object(O.jsx)("th",{children:"First name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Email"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){return Object(O.jsx)(x,{user:e,deleteUser:n},e.id)}))})]})})})};var v=function(){return Object(O.jsx)("div",{className:"footer",children:Object(O.jsx)("p",{children:"this footer"})})},m=function(e){var t=e.project,n=e.deleteProject;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.name}),Object(O.jsx)("td",{children:t.url}),Object(O.jsx)("td",{children:t.users_list.map((function(e,t){return Object(O.jsx)("td",{children:e})}))}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"DELETE"})})]})},g=function(e){var t=e.projects,n=e.deleteProject;return Object(O.jsx)("div",{className:"outer",children:Object(O.jsx)("div",{className:"inner",children:Object(O.jsxs)("table",{className:"Table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Project name"}),Object(O.jsx)("th",{children:"URl"}),Object(O.jsx)("th",{children:"Users List"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){return Object(O.jsx)(m,{project:e,deleteProject:n},e.id)}))})]})})})};var k=function(){return Object(O.jsx)("div",{})},y=function(e){var t=e.todo,n=e.deleteTodo;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.description}),Object(O.jsx)("td",{children:t.create_at}),Object(O.jsx)("td",{children:t.update_at}),Object(O.jsx)("td",{children:t.is_active}),Object(O.jsx)("td",{children:t.project}),Object(O.jsx)("td",{children:t.user}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"DELETE"})})]})},_=function(e){var t=e.todos,n=e.deleteTodo;return Object(O.jsx)("div",{className:"outer",children:Object(O.jsx)("div",{className:"inner",children:Object(O.jsxs)("table",{className:"Table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Description"}),Object(O.jsx)("th",{children:"Create_at"}),Object(O.jsx)("th",{children:"Update_at"}),Object(O.jsx)("th",{children:"is_active"}),Object(O.jsx)("th",{children:"Project name"}),Object(O.jsx)("th",{children:"User name"})]})}),Object(O.jsx)("tbody",{children:t.map((function(e,t){return Object(O.jsx)(y,{todo:e,deleteTodo:n},e.id)}))})]})})})},C=n(15),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={login:"",password:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("form",{className:"header",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(O.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(r.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={name:"",url:"",users:[]},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(console.log(e.target.selectedOptions),e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.url,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("form",{className:"header",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(O.jsx)("input",{type:"text",name:"name",placeholder:"Name Project",value:this.state.name,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("input",{type:"text",name:"url",placeholder:"Link to GitHub",value:this.state.url,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("select",{multiple:!0,name:"users",onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(O.jsxs)("option",{value:e.id,children:[e.username," "]},e.id)}))}),Object(O.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(r.a.Component),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={description:"",projects:"",users:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){console.log(e.target.selectedOptions),this.setState({projects:e.target.value})}},{key:"handleUserChange",value:function(e){console.log("!!!!!!!!!!!",e.target.selectedOptions),this.setState({users:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.description,this.state.projects,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("form",{className:"header",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(O.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("select",{name:"projects",onChange:function(t){return e.handleProjectChange(t)},children:this.props.projects.map((function(e){return Object(O.jsxs)("option",{value:e.id,children:[e.name," "]},e.id)}))}),Object(O.jsx)("select",{name:"users",onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(O.jsxs)("option",{value:e.id,children:[e.username," "]},e.id)}))}),Object(O.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(r.a.Component),N=function(e){var t=e.location;return Object(O.jsxs)("div",{children:["404 Error Not found: ",t.pathname]})},U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).state={users:[],projects:[],todos:[],token:""},c}return Object(i.a)(n,[{key:"set_token",value:function(e){var t=this;(new p.a).set("token",e),this.setState({token:e},(function(){return t.load_data()}))}},{key:"is_authenticated",value:function(){return""!==this.state.token}},{key:"logout",value:function(){this.set_token("")}},{key:"get_token_from_storage",value:function(){var e=this,t=(new p.a).get("token");this.setState({token:t},(function(){return e.load_data()}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json; version=v2"};return this.is_authenticated()&&(e.Authorization="Token "+this.state.token),e}},{key:"load_data",value:function(){var e=this,t=this.get_headers();d.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){var n=t.data.results;e.setState({users:n})})).catch((function(e){return console.log(e)})),d.a.get("http://127.0.0.1:8000/api/project/",{headers:t}).then((function(t){e.setState({projects:t.data.results})})).catch((function(e){return console.log(e)})),d.a.get("http://127.0.0.1:8000/api/todo/",{headers:t}).then((function(t){e.setState({todos:t.data.results})})).catch((function(e){return console.log(e)}))}},{key:"get_token",value:function(e,t){var n=this;d.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(e){n.set_token(e.data.token)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"deleteUser",value:function(e){var t=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/users/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){return console.log(e)})),console.log("delete"+e)}},{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/todo/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){return console.log(e)})),console.log("delete"+e)}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/todo/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){return console.log(e.response)})),console.log("delete"+e)}},{key:"createProject",value:function(e,t,n){var c=this;console.log(e,t,n);var r=this.get_headers();d.a.post("http://127.0.0.1:8000/api/project/",{name:e,url:t,users_list:n},{headers:r}).then((function(e){c.load_data()})).catch((function(e){return console.log(e)}))}},{key:"createTodo",value:function(e,t,n){var c=this;if(console.log(e,t,n),e&&t&&n){var r=this.get_headers();d.a.post("http://127.0.0.1:8000/api/todo/",{description:e,project:t,user:n},{headers:r}).then((function(e){c.load_data()})).catch((function(e){return console.log(e.response)}))}else console.log("Empty params:","description",!e,"projects",!t,"users",!n)}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)(h.a,{children:[Object(O.jsx)(k,{children:" "}),Object(O.jsx)("nav",{className:"menu",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(h.b,{to:"/",children:"User"})}),Object(O.jsx)("li",{children:Object(O.jsx)(h.b,{to:"/project",children:"Projects"})}),Object(O.jsx)("li",{children:Object(O.jsx)(h.b,{to:"/todo",children:"Todo"})}),Object(O.jsx)("li",{children:Object(O.jsx)(h.b,{to:"/project/create",children:"Create Project"})}),Object(O.jsx)("li",{children:Object(O.jsx)(h.b,{to:"/todo/create",children:"Create ToDo"})}),Object(O.jsx)("li",{children:this.is_authenticated()?Object(O.jsx)("button",{onClick:function(){return e.logout()},children:"Logout"}):Object(O.jsx)(h.b,{to:"/login",children:"Login"})})]})}),Object(O.jsxs)(b.c,{children:[Object(O.jsx)(b.a,{exact:!0,path:"/",component:function(){return Object(O.jsx)(f,{users:e.state.users,deleteUser:function(t){return e.deleteUser(t)}})}}),Object(O.jsx)(b.a,{exact:!0,path:"/project/",component:function(){return Object(O.jsx)(g,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(O.jsx)(b.a,{exact:!0,path:"/todo/",component:function(){return Object(O.jsx)(_,{todos:e.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(O.jsx)(b.a,{exact:!0,path:"/project/create",component:function(){return Object(O.jsx)(T,{users:e.state.users,createProject:function(t,n,c){return e.createProject(t,n,c)}})}}),Object(O.jsx)(b.a,{exact:!0,path:"/todo/create",component:function(){return Object(O.jsx)(P,{projects:e.state.projects,users:e.state.users,createTodo:function(t,n,c){return e.createTodo(t,n,c)}})}}),Object(O.jsx)(b.a,{exact:!0,path:"/login/",component:function(){return Object(O.jsx)(S,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(O.jsx)(b.a,{component:N})]})]}),Object(O.jsx)(v,{children:" "})]})}}]),n}(r.a.Component),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(U,{})}),document.getElementById("root")),E()}},[[64,1,2]]]);
//# sourceMappingURL=main.6dd02c94.chunk.js.map